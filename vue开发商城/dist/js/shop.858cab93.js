(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["shop"],{"0b97":function(t,e,c){},"5c83":function(t,e,c){},"5f6f":function(t,e,c){"use strict";c.r(e);var a=c("7a23");const n=t=>(Object(a["w"])("data-v-6045a80e"),t=t(),Object(a["u"])(),t),s={class:"wrapper"},o={class:"search"},i=n(()=>Object(a["g"])("div",{class:"search__content"},[Object(a["g"])("span",{class:"search__content__icon iconfont"},"  "),Object(a["g"])("input",{class:"search__content__input",placeholder:"请输入商品名称"})],-1));function r(t,e,c,n,r,b){const l=Object(a["A"])("ShopInfo"),d=Object(a["A"])("Content");return Object(a["t"])(),Object(a["f"])("div",s,[Object(a["g"])("div",o,[Object(a["g"])("div",{class:"search__back iconfont",onClick:e[0]||(e[0]=(...t)=>n.handleBackClick&&n.handleBackClick(...t))},"  "),i]),Object(a["K"])(Object(a["j"])(l,{item:n.item,hideBorder:!0},null,8,["item"]),[[a["G"],n.item.imgUrl]]),Object(a["j"])(d,{shopName:n.item.name},null,8,["shopName"])])}var b=c("6605"),l=c("b775"),d=c("d7d0");const _=t=>(Object(a["w"])("data-v-c57b715a"),t=t(),Object(a["u"])(),t),u={class:"content"},p={class:"category"},j=["onClick"],m={class:"product"},O=["src"],g={class:"product__item__detail"},h={class:"product__item__title"},v={class:"product__item__sales"},C={class:"product__item__price"},f=_(()=>Object(a["g"])("span",{class:"product__item__yen"},"¥",-1)),I={class:"product__item__origin"},k={class:"product__number"},w=["onClick"],y=["onClick"];function L(t,e,c,n,s,o){return Object(a["t"])(),Object(a["f"])("div",u,[Object(a["g"])("div",p,[(Object(a["t"])(!0),Object(a["f"])(a["a"],null,Object(a["z"])(n.categories,t=>(Object(a["t"])(),Object(a["f"])("div",{class:Object(a["p"])({category__item:!0,"category__item--active":n.currentTab===t.tab}),key:t.name,onClick:()=>n.handleTabClick(t.tab)},Object(a["C"])(t.name),11,j))),128))]),Object(a["g"])("div",m,[(Object(a["t"])(!0),Object(a["f"])(a["a"],null,Object(a["z"])(n.list,t=>(Object(a["t"])(),Object(a["f"])("div",{class:"product__item",key:t._id},[Object(a["g"])("img",{class:"product__item__img",src:t.imgUrl},null,8,O),Object(a["g"])("div",g,[Object(a["g"])("h4",h,Object(a["C"])(t.name),1),Object(a["g"])("p",v,"月售 "+Object(a["C"])(t.sales)+" 件",1),Object(a["g"])("p",C,[f,Object(a["i"])(Object(a["C"])(t.price)+" ",1),Object(a["g"])("span",I,"¥"+Object(a["C"])(t.oldPrice),1)])]),Object(a["g"])("div",k,[Object(a["g"])("span",{class:"product__number__minus",onClick:()=>{n.changeCartItem(n.shopId,t._id,t,-1,c.shopName)}},"-",8,w),Object(a["i"])(" "+Object(a["C"])(n.getProductCartCount(n.shopId,t._id))+" ",1),Object(a["g"])("span",{class:"product__number__plus",onClick:()=>{n.changeCartItem(n.shopId,t._id,t,1,c.shopName)}},"+",8,y)])]))),128))])])}var T=c("5502");const N=()=>{const t=Object(T["b"])(),e=t.state.cartList,c=(e,c,a,n)=>{t.commit("changeCartItemInfo",{shopId:e,productId:c,productInfo:a,num:n})};return{cartList:e,changeCartItemInfo:c}},B=[{name:"全部商品",tab:"all"},{name:"秒杀",tab:"seckill"},{name:"新鲜水果",tab:"fruit"}],P=()=>{const t=Object(a["y"])(B[0].tab),e=e=>{t.value=e};return{currentTab:t,handleTabClick:e}},S=(t,e)=>{const c=Object(a["x"])({list:[]}),n=async()=>{var a;const n=await Object(l["a"])(`/api/shop/${e}/products`,{tab:t.value});0===(null===n||void 0===n?void 0:n.errno)&&null!==n&&void 0!==n&&null!==(a=n.data)&&void 0!==a&&a.length&&(c.list=n.data)};Object(a["I"])(()=>{n()});const{list:s}=Object(a["D"])(c);return{list:s}},x=()=>{const t=Object(T["b"])(),{cartList:e,changeCartItemInfo:c}=N(),a=(e,c)=>{t.commit("changeShopName",{shopId:e,shopName:c})},n=(t,e,n,s,o)=>{c(t,e,n,s),a(t,o)},s=(t,c)=>{var a,n,s;return(null===e||void 0===e||null===(a=e[t])||void 0===a||null===(n=a.productList)||void 0===n||null===(s=n[c])||void 0===s?void 0:s.count)||0};return{cartList:e,changeCartItem:n,getProductCartCount:s}};var D={name:"Content",props:["shopName"],setup(){const t=Object(b["c"])(),e=t.params.id,{currentTab:c,handleTabClick:a}=P(),{list:n}=S(c,e),{changeCartItem:s,cartList:o,getProductCartCount:i}=x();return{categories:B,currentTab:c,handleTabClick:a,list:n,shopId:e,changeCartItem:s,cartList:o,getProductCartCount:i}}},U=(c("692f"),c("6b0d")),z=c.n(U);const A=z()(D,[["render",L],["__scopeId","data-v-c57b715a"]]);var J=A;const G=()=>{const t=Object(b["c"])(),e=Object(a["x"])({item:{}}),c=async()=>{const c=await Object(l["a"])("/api/shop/"+t.params.id);0===(null===c||void 0===c?void 0:c.errno)&&null!==c&&void 0!==c&&c.data&&(e.item=c.data)},{item:n}=Object(a["D"])(e);return{item:n,getItemData:c}},K=()=>{const t=Object(b["d"])(),e=()=>{t.back()};return e};var $={name:"Shop",components:{ShopInfo:d["a"],Content:J},setup(){const{item:t,getItemData:e}=G(),c=K();return e(),{item:t,handleBackClick:c}}};c("eb08");const q=z()($,[["render",r],["__scopeId","data-v-6045a80e"]]);e["default"]=q},"692f":function(t,e,c){"use strict";c("dba6")},d7d0:function(t,e,c){"use strict";var a=c("7a23");const n={class:"shop"},s=["src","alt"],o={class:"shop__content__title"},i={class:"shop__content__tags"},r={class:"shop__content__tag"},b={class:"shop__content__tag"},l={class:"shop__content__tag"},d={class:"shop__content__highlight"};function _(t,e,c,_,u,p){return Object(a["t"])(),Object(a["f"])("div",n,[Object(a["g"])("img",{class:"shop__img",src:c.item.imgUrl,alt:c.item.name},null,8,s),Object(a["g"])("div",{class:Object(a["p"])(["shop__content",{"shop__content--bordered":!c.hideBorder}])},[Object(a["g"])("div",o,Object(a["C"])(c.item.name),1),Object(a["g"])("div",i,[Object(a["g"])("span",r,"月售："+Object(a["C"])(c.item.sales),1),Object(a["g"])("span",b,"起送："+Object(a["C"])(c.item.expressLimit),1),Object(a["g"])("span",l,"基础运费："+Object(a["C"])(c.item.expressPrice),1)]),Object(a["g"])("p",d,Object(a["C"])(c.item.slogan),1)],2)])}var u={name:"ShopInfo",props:["item","hideBorder"]},p=(c("f674"),c("6b0d")),j=c.n(p);const m=j()(u,[["render",_],["__scopeId","data-v-0a1b15d7"]]);e["a"]=m},dba6:function(t,e,c){},eb08:function(t,e,c){"use strict";c("0b97")},f674:function(t,e,c){"use strict";c("5c83")}}]);
//# sourceMappingURL=shop.858cab93.js.map